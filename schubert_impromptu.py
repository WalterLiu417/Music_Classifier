# Generates a small section of Schubert's Impromptu Op. 90-2
# By Walter Liu

import music21 as m
from music21.note import Note as n
from music21.chord import Chord as c
from music21.note import Rest as r
from music21.duration import Duration as d
from copy import deepcopy as cp
from music21.tie import Tie as t
from score_to_img import main
import random

S = "start"
C = "continue"
X = "stop"

rh = m.stream.Stream()
ts = m.meter.TimeSignature("3/4")
ks = m.key.KeySignature(-3)
tmp = m.tempo.MetronomeMark(number=120)
cl = m.clef.TrebleClef()
rh.append(ts)
rh.append(tmp)
rh.append(ks)
rh.append(cl)

nc41 = n("C4", duration=d(1))
ng41 = n("G4", duration=d(1))
na41 = n("A4", duration=d(1))
ng42 = n("G4", duration=d(2))
nf41 = n("F4", duration=d(1))
ne41 = n("E4", duration=d(1))
nd41 = n("D4", duration=d(1))
nc405 = n("C4", duration=d(1/2))
nd405 = n("D4", duration=d(1/2))
ne42 = n("E4", duration=d(2))
nf4025 = n("F4", duration=d(1/4))
ng405 = n("G4", duration=d(1/2))
na42 = n("A4", duration=d(2))
nb4025 = n("B4", duration=d(1/4))
nc42 = n("C4", duration=d(2))
nd42 = n("D4", duration=d(2))
nbb51 = n("B-5", duration=d(1))
ng513 = n("G5", duration=d(1/3))
nbb513 = n("B-5", duration=d(1/3))
nab513 = n("A-5", duration=d(1/3))
ng513 = n("G5", duration=d(1/3))
nf513 = n("F5", duration=d(1/3))
neb513 = n("E-5", duration=d(1/3))
nd513 = n("D5", duration=d(1/3))
nc513 = n("C5", duration=d(1/3))
nbb413 = n("B-4", duration=d(1/3))
nab413 = n("A-4", duration=d(1/3))
ng413 = n("G4", duration=d(1/3))
nf413 = n("F4", duration=d(1/3))
neb413 = n("E-4", duration=d(1/3))
nd413 = n("D4", duration=d(1/3))
nc413 = n("C4", duration=d(1/3))
nbb313 = n("B-3", duration=d(1/3))
ne413 = n("E4", duration=d(1/3))
ngb413 = n("G-4", duration=d(1/3))
nc613 = n("C6", duration=d(1/3))

rh.append(cp(nbb51))
rh.append(cp(ng513))
rh.append(cp(nbb513))
rh.append(cp(nab513))
rh.append(cp(ng513))
rh.append(cp(nf513))
rh.append(cp(neb513))
rh.append(cp(nd513))
rh.append(cp(nc513))
rh.append(cp(nbb413))
rh.append(cp(nab413))
rh.append(cp(ng413))
rh.append(cp(nf413))
rh.append(cp(neb413))
rh.append(cp(nd413))
rh.append(cp(nc413))
rh.append(cp(nbb313))
rh.append(cp(nc413))
rh.append(cp(nd413))
rh.append(cp(neb413))
rh.append(cp(nd413))
rh.append(cp(neb413))
rh.append(cp(ne413))
rh.append(cp(neb413))
rh.append(cp(ne413))
rh.append(cp(nf413))
rh.append(cp(ne413))
rh.append(cp(nf413))
rh.append(cp(ngb413))
rh.append(cp(nf413))
rh.append(cp(ngb413))
rh.append(cp(ng413))
rh.append(cp(ngb413))
rh.append(cp(ng413))
rh.append(cp(nab413))
rh.append(cp(ng413))
rh.append(cp(nab413))
rh.append(cp(ng413))
rh.append(cp(nbb413))
rh.append(cp(nab413))
rh.append(cp(ng413))
rh.append(cp(nab413))
rh.append(cp(nbb413))
rh.append(cp(nc513))
rh.append(cp(nd513))
rh.append(cp(neb513))
rh.append(cp(nf513))
rh.append(cp(nc613))
rh.append(cp(nbb513))
rh.append(cp(nab513))
rh.append(cp(ng513))
rh.append(cp(nf513))
rh.append(cp(neb513))
rh.append(cp(nd513))
rh.append(cp(nc513))
rh.append(cp(nbb413))
rh.append(cp(nf513))
rh.append(cp(neb513))
rh.append(cp(nd513))
rh.append(cp(nc513))
rh.append(cp(nbb413))
rh.append(cp(nab413))
rh.append(cp(ng413))
rh.append(cp(nf413))
rh.append(cp(neb413))
rh.append(cp(nf413))
rh.append(cp(ng413))
rh.append(cp(nab413))
rh.append(cp(nbb413))
rh.append(cp(nc513))
rh.append(cp(nd513))
rh.append(cp(neb513))
rh.append(cp(nf513))



rh.show()
main(rh, "C:/users/walte/desktop/schubert_impromptu.png")